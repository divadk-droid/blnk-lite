# BLNK Risk Gate - Improvement Plan

## 긴급 개선 (Critical Fixes)

### 1. WETH/USDC Gate Mismatch 해결
- [ ] WETH gate 로직 디버깅 `autoImplement`
- [ ] USDC gate 로직 디버깅 `autoImplement`
- [ ] 화이트리스트 vs 실제 분석 결과 비교
- [ ] 테스트 케이스 추가

**문제:** WETH/USDC가 화이트리스트에는 있지만 gate 분석 결과와 mismatch  
**원인:** 캐시된 결과 vs 실제 RPC 호출 결과 불일치 가능성  
**해결책:** 
1. 화이트리스트 우선순위 확인
2. 캐시 키 정규화 (소문자 변환)
3. gate 응답에 whitelist 필드 추가

**우선순위:** 긴급  
**담당:** 백엔드  
**목표일:** 2026-02-24

### 2. Cache 최적화
- [ ] Cache TTL 동적 조정 `autoImplement`
- [ ] Cache hit/miss 메트릭스 수집
- [ ] Redis 업그레이드 준비

**문제:** 캐시가 예상보다 효율적이지 않음  
**해결책:**
1. Gate 결과: 5분 → 15분 TTL 연장
2. Scan 결과: 1시간 → 3시간 TTL 연장
3. 인기 토큰 사전 캐싱 강화

**우선순위:** 높음  
**담당:** 백엔드  
**목표일:** 2026-02-25

---

## 진행 중 (In Progress)

### 1. ACP 마켓 등록
- [x] Virtuals Protocol ACP Seller Portal 등록
- [ ] 오퍼링 13개 등록 완료
- [ ] 토큰 유틸리티 문서화

**우선순위:** 높음  
**담당:** 마케팅/BD  
**목표일:** 2026-02-28

---

## 예정 (Planned)

### 2. 결제 인프라 강화
- [x] Stripe 구독 연동
- [x] API 키 자동 발급 시스템
- [x] 웹훅 처리 (invoice.paid, payment_failed) `autoImplement`
- [ ] 셀프서비스 업그레이드/다운그레이드

**우선순위:** 높음  
**담당:** 백엔드  
**목표일:** 2026-03-07

### 3. 프로 메트릭스
- [x] Prometheus 메트릭스 노출
- [x] Grafana 대시보드
- [x] P95/P99 지연 시간 추적 `autoImplement`
- [ ] 에러율 알림 `autoImplement`

**우선순위:** 중간  
**담당:** DevOps  
**목표일:** 2026-03-14

### 4. 멀티체인 지원
- [x] Base 네트워크 추가
- [x] Arbitrum 네트워크 추가
- [ ] 체인별 캐시 분리 `autoImplement`
- [ ] 체인 선택 파라미터 강화 `autoImplement`

**우선순위:** 중간  
**담당:** 백엔드  
**목표일:** 2026-03-21

### 5. 고급 분석 (Pro 티어)
- [x] 스토리지 슬롯 읽기 (owner, minter)
- [x] 이벤트 로그 분석 (Transfer, Mint)
- [ ] 유동성 풀 분석
- [ ] 홀더 분포 체크

**우선순위:** 낮음  
**담당:** 백엔드  
**목표일:** 2026-04-04

---

## 검토 중 (Under Review)

### 6. 온체인 $BLNK 검증
- [x] ERC20 잔고 조회 컨트랙트
- [ ] Merkle Proof 검증
- [ ] 스테이킹 복너스 계산

**우선순위:** 낮음  
**블로커:** 가스 비용 최적화 필요

### 7. 실시간 모니터링
- [ ] WebSocket 알림
- [x] Telegram 봇 명령어
- [x] Discord 봇 통합

**우선순위:** 낮음  
**블로커:** 사용자 요청 대기

---

## 완료 (Completed)

### 2026-02-23
- [x] Lite 모드 서버 배포
- [x] 1 RPC call 게이트 구현
- [x] SQLite 캐시 구현
- [x] 4티어 레이트리밋
- [x] Policy Pack 4개 정책
- [x] 로깅 시스템
- [x] 일일 리포트
- [x] 캐시 워머
- [x] 알림 시스템
- [x] ACP 오퍼링 스펙

---

## 아이디어 백로그

- [x] MEV 보호 분석
- [ ] 프론트러닝 탐지
- [ ] 거래 슬리피지 예측
- [ ] 가격 예측 (ML)
- [ ] 커뮤니티 정책 공유
- [ ] 감사 리포트 자동 생성

---

## 우선순위 변경 로그

| 날짜 | 변경 사항 | 사유 |
|------|----------|------|
| 2026-02-23 | ACP 등록 우선순위 상향 | 사용자 유치 병목 |
| 2026-02-23 | Stripe 연동 우선순위 상향 | 매출 검증 필요 |

---

**마지막 업데이트:** 2026-02-23  
**다음 검토일:** 2026-03-01


## 자동 감지 (Auto-Detected)


### 2026-02-23
- [x] **WARNING** [logic] Gate decision mismatch for 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2
- [x] **WARNING** [logic] Gate decision mismatch for 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48
- [x] **WARNING** [cache] Cache may not be working optimally (자동 수정 가능: Check cache TTL and storage)


## Research Ideas

### 2026-02-23
- [x] MEV protection (from Trading Assistant Pro)
- [x] slippage prediction (from Trading Assistant Pro)
- [ ] risk scoring (from Portfolio Guardian)
- [x] alert system (from Portfolio Guardian)
- [x] vulnerability detection (from Smart Contract Auditor)


## 자동 생성 스킬 (Auto-Generated Skills)
*Generated by SkillGeneratorAgent*


### 2026-02-23
- [x] **git-commit-push** - Add, commit, and push in one command
  - Frequency: 10x, Saves: 30 seconds per commit
- [x] **git-status-short** - Quick git status with only changed files
  - Frequency: 5x, Saves: 5 seconds
- [x] **git-last-commits** - Show last N commits with stats
  - Frequency: 3x, Saves: 10 seconds
- [x] **deploy-quick** - Quick deploy with pre-checks
  - Frequency: 5x, Saves: 1 minute
- [x] **test-api** - Test all API endpoints
  - Frequency: 8x, Saves: 2 minutes
- [x] **test-cache** - Verify cache is working
  - Frequency: 4x, Saves: 30 seconds
- [x] **logs-tail** - Tail recent logs with filtering
  - Frequency: 6x, Saves: 10 seconds
- [x] **metrics-quick** - Quick metrics snapshot
  - Frequency: 4x, Saves: 15 seconds

### 2026-02-23
- [x] **WARNING** [logic] Gate decision mismatch for 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2
- [x] **WARNING** [logic] Gate decision mismatch for 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48
- [x] **WARNING** [cache] Cache may not be working optimally (자동 수정 가능: Check cache TTL and storage)

### 2026-02-23
- [x] **WARNING** [logic] Gate decision mismatch for 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2
- [x] **WARNING** [logic] Gate decision mismatch for 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48
- [x] **WARNING** [cache] Cache may not be working optimally (자동 수정 가능: Check cache TTL and storage)
